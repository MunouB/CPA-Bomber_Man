{"ast":null,"code":"import * as conf from './conf';\nimport { playerSprites } from './images';\nimport { TileType } from './state';\nexport const render = ctx => state => {\n  const tileSize = conf.TILESIZE;\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n  for (let y = 0; y < state.gameMap.height; y++) {\n    for (let x = 0; x < state.gameMap.width; x++) {\n      const tile = state.gameMap.tiles[y][x];\n\n      switch (tile) {\n        case TileType.WALL:\n          ctx.fillStyle = 'black';\n          break;\n\n        case TileType.BREAKABLE:\n          ctx.fillStyle = 'brown';\n          break;\n\n        case TileType.WATER:\n          ctx.fillStyle = 'blue';\n          break;\n\n        case TileType.EMPTY:\n          ctx.fillStyle = 'gray';\n          break;\n\n        case TileType.EXPLOSION:\n          ctx.fillStyle = 'red';\n          break;\n      }\n\n      ctx.fillRect(x * tileSize, y * tileSize, tileSize, tileSize);\n    }\n  } // Render player\n\n\n  const playerImg = playerSprites[state.player.direction];\n\n  if (playerImg.complete) {\n    const tileSize = conf.TILESIZE;\n    ctx.drawImage(playerImg, state.player.x * tileSize, state.player.y * tileSize, tileSize, tileSize);\n  } // Render bombs\n\n\n  state.bombs.forEach(bomb => {\n    ctx.fillStyle = 'yellow';\n    ctx.fillRect(bomb.x * tileSize, bomb.y * tileSize, tileSize, tileSize);\n  }); // Render explosions\n\n  state.explosions.forEach(explosion => {\n    ctx.fillStyle = 'red';\n    ctx.fillRect(explosion.x * tileSize, explosion.y * tileSize, tileSize, tileSize);\n  }); // Render enemies\n\n  state.enemies.forEach(enemy => {\n    if (!enemy.alive) return;\n    ctx.fillStyle = 'white';\n    ctx.fillRect(enemy.x * tileSize + 5, enemy.y * tileSize + 5, tileSize - 10, tileSize - 10);\n  }); // Render PowerUps\n\n  state.powerups.forEach(p => {\n    if (p.type === 'bomb') ctx.fillStyle = 'pink';else if (p.type === 'range') ctx.fillStyle = 'purple';else if (p.type === 'freeze') ctx.fillStyle = 'cyan';\n    ctx.fillRect(p.x * tileSize + 5, p.y * tileSize + 5, tileSize - 10, tileSize - 10);\n  });\n\n  if (state.gameOver) {\n    ctx.fillStyle = 'black';\n    ctx.font = '30px Arial';\n    ctx.fillText('Game Over', ctx.canvas.width / 2 - 70, ctx.canvas.height / 2);\n  }\n};","map":{"version":3,"sources":["/home/munou/stl/year_2/2/cpa/projet_de_0/canvas-master/src/components/canvas/renderer.ts"],"names":["conf","playerSprites","TileType","render","ctx","state","tileSize","TILESIZE","clearRect","canvas","width","height","y","gameMap","x","tile","tiles","WALL","fillStyle","BREAKABLE","WATER","EMPTY","EXPLOSION","fillRect","playerImg","player","direction","complete","drawImage","bombs","forEach","bomb","explosions","explosion","enemies","enemy","alive","powerups","p","type","gameOver","font","fillText"],"mappings":"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","sourcesContent":["import * as conf from './conf'\nimport { playerSprites } from './images'\nimport { TileType, State } from './state'\n\nexport const render = (ctx: CanvasRenderingContext2D) => (state: State) => {\n  const tileSize = conf.TILESIZE\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n  for (let y = 0; y < state.gameMap.height; y++) {\n    for (let x = 0; x < state.gameMap.width; x++) {\n      const tile = state.gameMap.tiles[y][x]\n\n      switch (tile) {\n        case TileType.WALL:\n          ctx.fillStyle = 'black'\n          break\n        case TileType.BREAKABLE:\n          ctx.fillStyle = 'brown'\n          break\n        case TileType.WATER:\n          ctx.fillStyle = 'blue'\n          break\n        case TileType.EMPTY:\n          ctx.fillStyle = 'gray'\n          break\n        case TileType.EXPLOSION:\n          ctx.fillStyle = 'red'\n          break\n      }\n      ctx.fillRect(x * tileSize, y * tileSize, tileSize, tileSize)\n    }\n  }\n\n  // Render player\n  const playerImg = playerSprites[state.player.direction]\n  if (playerImg.complete) {\n    const tileSize = conf.TILESIZE\n    ctx.drawImage(\n      playerImg,\n      state.player.x * tileSize,\n      state.player.y * tileSize,\n      tileSize,\n      tileSize\n    )\n  }\n\n  // Render bombs\n  state.bombs.forEach(bomb => {\n    ctx.fillStyle = 'yellow'\n    ctx.fillRect(bomb.x * tileSize, bomb.y * tileSize, tileSize, tileSize)\n  })\n  // Render explosions\n  state.explosions.forEach(explosion => {\n    ctx.fillStyle = 'red'\n    ctx.fillRect(explosion.x * tileSize, explosion.y * tileSize, tileSize, tileSize)\n  })\n  // Render enemies\n  state.enemies.forEach(enemy => {\n    if (!enemy.alive) return\n    ctx.fillStyle = 'white'\n    ctx.fillRect(enemy.x * tileSize + 5, enemy.y * tileSize + 5, tileSize - 10, tileSize - 10)\n  })\n  // Render PowerUps\n  state.powerups.forEach(p => {\n    if (p.type === 'bomb') ctx.fillStyle = 'pink'\n    else if (p.type === 'range') ctx.fillStyle = 'purple'\n    else if (p.type === 'freeze') ctx.fillStyle = 'cyan'\n    ctx.fillRect(p.x * tileSize + 5, p.y * tileSize + 5, tileSize - 10, tileSize - 10)\n  })\n  if (state.gameOver) {\n    ctx.fillStyle = 'black'\n    ctx.font = '30px Arial'\n    ctx.fillText('Game Over', ctx.canvas.width / 2 - 70, ctx.canvas.height / 2)\n  }\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}